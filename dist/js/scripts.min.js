var substringMatcher=function(e){return function(t,i){var n;n=[],substrRegex=new RegExp(t,"i"),$.each(e,function(e,t){substrRegex.test(t)&&n.push(t)}),i(n)}},cities=[];$.getJSON("city.list.json",function(e){$.each(e,function(e,t){cities.push(t.name)})}).fail(function(e,t,i){var n=t+", "+i;console.log("Request Failed: "+n)}),$("#the-basics .typeahead").typeahead({hint:!0,highlight:!0,minLength:1},{name:"cities",source:substringMatcher(cities)}),jQuery(document).ready(function(e){e('input[type="search"]').on("typeahead:selected",function(t,i){console.log(i);var n=i,s="http://api.openweathermap.org/data/2.5/weather?appid=68d06ff44fb97dc7a6ea98b54f8374ba&callback=",a={mode:"JSON",units:"metric",q:n},r=function(e){var t=new Date(1e3*e),i=t.getHours()<10?"0"+t.getHours():t.getHours(),n=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),s=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds(),a=i+":"+n+":"+s;return a},u=function(e){var t=new Date(1e3*e),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=t.getFullYear(),s=i[t.getMonth()],a=t.getDate(),r=a+" "+s+" "+n;return r},c=function(e,t){var i='<img src="http://openweathermap.org/img/w/'+e+'.png" alt="'+t+'" class="weather-icon">';return i},l=function(e,t,i){var n=t+", "+i;console.log("Request Failed: "+n)},o=function(t){e("#results").empty();var i='<ul class="list">';i+="<li>"+t.name+", "+t.sys.country+c(t.weather[0].icon,t.weather[0].description)+"</li>",i+="<li>"+t.main.temp+" Â°C</li>",i+='<li class="capitalize">'+t.weather[0].description+"</li>",i+="<li> Date: "+u(t.dt)+"</li>",i+="<li> Sunrise at: "+r(t.sys.sunrise)+"</li>",i+="<li> Sunset at: "+r(t.sys.sunset)+"</li>",i+="<li> Pressure: "+t.main.pressure+" hpa</li>",i+="<li> Wind speed: "+t.wind.speed+" km/h</li>",i+="<li> Humidity: "+t.main.humidity+" %</li>",i+="</ul>",e("#results").html(i)};e.getJSON(s,a,o).fail(l)})});