{"version":3,"sources":["search.js","weather.js"],"names":["cities","substringMatcher","strs","q","cb","matches","substrRegex","RegExp","$","each","i","str","test","push","getJSON","response","index","city","name","fail","jqxhr","textStatus","error","err","console","log","typeahead","hint","highlight","minLength","source","jQuery","document","ready","$search","on","event","selection","cityName","openWeatherAPI","openWeatherOptions","mode","units","timeConverter","UNIX_timestamp","a","Date","hour","getHours","min","getMinutes","sec","getSeconds","time","dateConverter","months","year","getFullYear","month","getMonth","date","getDate","displayDate","displayIcon","iconId","description","icon","displayError","displayWeather","empty","weatherHTML","sys","country","weather","main","temp","dt","sunrise","sunset","pressure","wind","speed","humidity","html","val"],"mappings":"AAAA,GAAAA,WACAC,iBAAA,SAAAC,GACA,MAAA,UAAAC,EAAAC,GACA,GAAAC,EAGAA,MAGAC,YAAA,GAAAC,QAAAJ,EAAA,KAIAK,EAAAC,KAAAP,EAAA,SAAAQ,EAAAC,GACAL,YAAAM,KAAAD,IACAN,EAAAQ,KAAAF,KAIAP,EAAAC,IAIAG,GAAAM,QAAA,iBAAA,SAAAC,GACAP,EAAAC,KAAAM,EAAA,SAAAC,EAAAC,GACAjB,OAAAa,KAAAI,EAAAC,UAEAC,KAAA,SAAAC,EAAAC,EAAAC,GACA,GAAAC,GAAAF,EAAA,KAAAC,CACAE,SAAAC,IAAA,mBAAAF,KAGAf,EAAA,0BAAAkB,WACAC,MAAA,EACAC,WAAA,EACAC,UAAA,IAGAX,KAAA,SACAY,OAAA7B,iBAAAD,UCvCA+B,OAAAC,UAAAC,MAAA,SAAAzB,GACA,GAAA0B,GAAA1B,EAAA,UAEA0B,GAAAC,GAAA,qBAAA,SAAAC,EAAAC,GACA,GAAAC,GAAAD,EACAE,EAAA,kGACAC,GACAC,KAAA,OACAC,MAAA,SACAvC,EAAAmC,GAGAK,EAAA,SAAAC,GACA,GAAAC,GAAA,GAAAC,MAAA,IAAAF,GACAG,EAAAF,EAAAG,WAAA,GAAA,IAAAH,EAAAG,WAAAH,EAAAG,WACAC,EAAAJ,EAAAK,aAAA,GAAA,IAAAL,EAAAK,aAAAL,EAAAK,aACAC,EAAAN,EAAAO,aAAA,GAAA,IAAAP,EAAAO,aAAAP,EAAAO,aACAC,EAAAN,EAAA,IAAAE,EAAA,IAAAE,CAEA,OAAAE,IAGAC,EAAA,SAAAV,GACA,GAAAC,GAAA,GAAAC,MAAA,IAAAF,GACAW,GAAA,MAAA,MAAA,MAAA,MAAA,MAAA,MAAA,MAAA,MAAA,MAAA,MAAA,MAAA,OACAC,EAAAX,EAAAY,cACAC,EAAAH,EAAAV,EAAAc,YACAC,EAAAf,EAAAgB,UACAC,EAAAF,EAAA,IAAAF,EAAA,IAAAF,CAEA,OAAAM,IAGAC,EAAA,SAAAC,EAAAC,GACA,GAAAC,GAAA,6CAAAF,EAAA,cAAAC,EAAA,yBAEA,OAAAC,IAGAC,EAAA,SAAA/C,EAAAC,EAAAC,GACA,GAAAC,GAAAF,EAAA,KAAAC,CAEAE,SAAAC,IAAA,mBAAAF,IAGA6C,EAAA,SAAArD,GAEAP,EAAA,YAAA6D,OACA,IAAAC,GAAA,mBACAA,IAAA,OAAAvD,EAAAG,KAAA,KAAAH,EAAAwD,IAAAC,QAAAT,EAAAhD,EAAA0D,QAAA,GAAAP,KAAAnD,EAAA0D,QAAA,GAAAR,aAAA,QACAK,GAAA,OAAAvD,EAAA2D,KAAAC,KAAA,WACAL,GAAA,0BAAAvD,EAAA0D,QAAA,GAAAR,YAAA,QACAK,GAAA,cAAAhB,EAAAvC,EAAA6D,IAAA,QACAN,GAAA,oBAAA3B,EAAA5B,EAAAwD,IAAAM,SAAA,QACAP,GAAA,mBAAA3B,EAAA5B,EAAAwD,IAAAO,QAAA,QACAR,GAAA,kBAAAvD,EAAA2D,KAAAK,SAAA,YACAT,GAAA,oBAAAvD,EAAAiE,KAAAC,MAAA,aACAX,GAAA,kBAAAvD,EAAA2D,KAAAQ,SAAA,UACAZ,GAAA,QAEA9D,EAAA,YAAA2E,KAAAb,GAGA9D,GAAAM,QAAAyB,EAAAC,EAAA4B,GAAAjD,KAAAgD,KAIAjC,EAAAC,GAAA,QAAA,WACAD,EAAAkD,IAAA","file":"scripts.min.js","sourcesContent":["var cities = [];\nvar substringMatcher = function(strs) {\n  return function findMatches(q, cb) {\n    var matches, substringRegex;\n\n    // an array that will be populated with substring matches\n    matches = [];\n\n    // regex used to determine if a string contains the substring `q`\n    substrRegex = new RegExp(q, 'i');\n\n    // iterate through the pool of strings and for any string that\n    // contains the substring `q`, add it to the `matches` array\n    $.each(strs, function(i, str) {\n      if (substrRegex.test(str)) {\n        matches.push(str);\n      }\n    });\n\n    cb(matches);\n  };\n};\n\n$.getJSON('city.list.json', function(response) {\n    $.each(response, function(index, city) {\n      cities.push(city.name);\n    });\n}).fail(function( jqxhr, textStatus, error ) {\n    var err = textStatus + \", \" + error;\n    console.log( \"Request Failed: \" + err );\n  });\n\n$('#the-basics .typeahead').typeahead({\n  hint: true,\n  highlight: true,\n  minLength: 1\n},\n{\n  name: 'cities',\n  source: substringMatcher(cities)\n});","jQuery(document).ready(function($) {\n  var $search = $('#search');\n\n  $search.on('typeahead:selected', function(event, selection) {\n    var cityName = selection;\n    var openWeatherAPI = 'http://api.openweathermap.org/data/2.5/weather?appid=68d06ff44fb97dc7a6ea98b54f8374ba&callback=';\n    var openWeatherOptions = {\n      mode  : 'JSON',\n      units : 'metric',\n      q     : cityName,\n    };\n\n    var timeConverter = function(UNIX_timestamp){\n      var a = new Date(UNIX_timestamp * 1000);\n      var hour = a.getHours() < 10 ? '0' + a.getHours() : a.getHours();\n      var min = a.getMinutes() < 10 ? '0' + a.getMinutes() : a.getMinutes();\n      var sec = a.getSeconds() < 10 ? '0' + a.getSeconds() : a.getSeconds();\n      var time =  hour + ':' + min + ':' + sec ;\n\n      return time;\n    };\n\n    var dateConverter = function(UNIX_timestamp) {\n      var a = new Date(UNIX_timestamp * 1000);\n      var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];\n      var year = a.getFullYear();\n      var month = months[a.getMonth()];\n      var date = a.getDate();\n      var displayDate = date + ' ' + month + ' ' + year;\n\n      return displayDate;\n    };\n\n    var displayIcon = function(iconId, description) {\n      var icon = '<img src=\"http://openweathermap.org/img/w/' + iconId + '.png\" alt=\"' + description + '\" class=\"weather-icon\">';\n\n      return icon;\n    };\n\n    var displayError = function( jqxhr, textStatus, error ) {\n      var err = textStatus + \", \" + error;\n\n      console.log( \"Request Failed: \" + err );\n    };\n\n    var displayWeather = function(response) {\n    \n      $('#results').empty(); // clear the previous search\n      var weatherHTML = '<ul class=\"list\">';\n      weatherHTML += '<li>' + response.name + ', ' + response.sys.country + displayIcon(response.weather[0].icon, response.weather[0].description) + '</li>';\n      weatherHTML += '<li>' + response.main.temp +' Â°C</li>';\n      weatherHTML += '<li class=\"capitalize\">' + response.weather[0].description +'</li>';\n      weatherHTML += '<li> Date: ' + dateConverter(response.dt) +'</li>';\n      weatherHTML += '<li> Sunrise at: ' + timeConverter(response.sys.sunrise) +'</li>';\n      weatherHTML += '<li> Sunset at: ' + timeConverter(response.sys.sunset) +'</li>';\n      weatherHTML += '<li> Pressure: ' + response.main.pressure +' hpa</li>';\n      weatherHTML += '<li> Wind speed: ' + response.wind.speed +' km/h</li>';\n      weatherHTML += '<li> Humidity: ' + response.main.humidity +' %</li>';\n      weatherHTML += '</ul>';\n\n      $('#results').html(weatherHTML);\n    };\n\n    $.getJSON(openWeatherAPI, openWeatherOptions, displayWeather).fail(displayError);\n  }); // end typehead:selected event\n\n  // empty input elem on click for another search\n  $search.on('click', function() {\n    $search.val('');\n  });\n}); // end ready\n"]}